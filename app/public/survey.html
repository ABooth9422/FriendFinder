<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <title>Friend Finder</title>
</head>

<body class="p-2 mx-5 my-5">

        <style>
            #main{
                background-image:url("http://www.executivestyle.com.au/content/dam/images/3/4/m/d/3/image.related.articleLeadwide.620x349.34hlt.png/1428456294765.jpg");
                
                
                background-position: center center;
            }
        </style>
    
            <div id=main class="text-primary font-weight-bold">
            <h1 class="text-center my-5">Survey Questions</h1>
            <h1 class="text-center my-5">To find your new BFF</h1>
            <h2 class="text-center my-5">About You!</h2>

            </div>
        <form>
        <div class="form">
            
            <div class ="my-5 border border-primary rounded bg-success p-2">
            <div class="form-group">
                <h3><span class="badge badge-primary my-2">Your Name(Required)</span></h3>
                <input type="text" class="form-control" id="name" placeholder="Your first and last name">
            </div>
            <div class="form-group">
                <h3><span class="badge badge-primary my-2">Insert url for an image of you</span></h3>
                <input type="url" class="form-control" id="imageLink" placeholder="insert image url here">
            </div>
        </div>
            <div class="my-5 border border-primary rounded bg-danger p-2">
                <h3><span class="badge badge-primary my-2">Question 1</span></h3>
                <h3 class="my-2">Your favorite food is pizza?</h3>
                <select title="test" id="q1" class="form-control form-control-lg question" style="width:fit-content;">
                    <option value="Select State" selected disabled hidden>Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="my-5 border border-primary rounded bg-info p-2">
                <h3><span class="badge badge-primary my-2">Question 2</span></h3>
                <h3 class="my-2">You feel motivated when somebody tells you that you cannot do something.</h3>
                <select id="q2" class="form-control form-control-lg question" style="width:fit-content;">
                    <option value="Select State" selected disabled hidden>Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="my-5 border border-primary rounded bg-success p-2">
                <h3><span class="badge badge-primary my-2">Question 3</span></h3>
                <h3 class="my-2">Peoples opinions upset you.</h3>
                <select id="q3" class="form-control form-control-lg question" style="width:fit-content;">
                    <option value="Select State" selected disabled hidden>Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="my-5 border border-primary rounded bg-danger p-2">
                <h3><span class="badge badge-primary my-2">Question 4</span></h3>
                <h3 class="my-2">You are very driven.</h3>
                <select id="q4" class="form-control form-control-lg question" style="width:fit-content;">
                    <option value="Select State" selected disabled hidden>Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="my-5 border border-primary rounded bg-info p-2">
                <h3><span class="badge badge-primary my-2">Question 5</span></h3>
                <h3 class="my-2">When you have to repeat yourself it annoys you</h3>
                <select id="q5" class="form-control form-control-lg question" style="width:fit-content;">
                    <option value="Select State" selected disabled hidden>Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="my-5 border border-primary rounded bg-success p-2">
                <h3><span class="badge badge-primary my-2">Question 6</span></h3>
                <h3 class="my-2">Dogs are better than cats.</h3>
                <select id="q6" class="form-control form-control-lg question" style="width:fit-content;">
                    <option value="Select State" selected disabled hidden>Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="my-5 border border-primary rounded bg-danger p-2">
                <h3><span class="badge badge-primary my-2">Question 7</span></h3>
                <h3 class="my-2">JQuery > Javascript</h3>
                <select id="q7" class="form-control form-control-lg question" style="width:fit-content;">
                    <option value="Select State" selected disabled hidden>Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="my-5 border border-primary rounded bg-info p-2">
                <h3><span class="badge badge-primary my-2">Question 8</span></h3>
                <h3 class="my-2">You are a patient person</h3>
                <select id="q8" class="form-control form-control-lg question" style="width:fit-content;">
                    <option value="Select State" selected disabled hidden>Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="my-5 border border-primary rounded bg-success p-2">
                <h3><span class="badge badge-primary my-2">Question 9</span></h3>
                <h3 class="my-2">You like this homework assignment</h3>
                <select id="q9" class="form-control form-control-lg question" style="width:fit-content;">
                    <option value="Select State" selected disabled hidden>Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="my-5 border border-primary rounded bg-danger p-2">
                <h3><span class="badge badge-primary my-2">Question 10</span></h3>
                <h3 class="my-3">You can't wait to graduate.</h3>
                <select id="q10" class="form-control form-control-lg question" style="width:fit-content;">
                    <option value="Select State" selected disabled hidden>Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <button id="submit" class="btn btn-lg btn-block btn-warning my-5">Submit your results!</button>
        </div>
    </form>

    <div class="modal fade bg-primary" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content d-flex justify-content center">
                <div class="modal-header">
                    <h5 class="modal-title text-center" id="exampleModalLabel">Your New Best Friend!</h5>
                    <hr>
                    <button type="button" id="close" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body text-center">

                </div>
            </div>
        </div>
    </div>
</body>

<footer>
    <p><a href="/api/friends">API Friends</a> | <a href="https:\\abooth9422.github.io">Github Portfolio</a> </p>
</footer>

<script>
    //reset function called on page load to clear values
    $(document).ready(function () {
        reset()

    })
    //on submission click we do stuff
    $("#submit").on("click", function () {
        //prevent submit button from submitting form
        event.preventDefault()
        //create scores array to hold the values of the answered questions
        var scores = []
        //parse the values that are being passed in as strings so we can use them as integers later
        scores.push(parseInt($("#q1").val()),
            parseInt($("#q2").val()),
            parseInt($("#q3").val()),
            parseInt($("#q4").val()),
            parseInt($("#q5").val()),
            parseInt($("#q6").val()),
            parseInt($("#q7").val()),
            parseInt($("#q8").val()),
            parseInt($("#q9").val()),
            parseInt($("#q10").val()))
            //identifying the other elements that we queried for
        var name = $("#name").val()
        var photo = $("#imageLink").val()
        //involving a check to make sure that all questions have been answered
        var question = questionCondition()
        console.log(scores)
        //involving a check to make sure some value has been passed for all the required fields if not the user is returned
        if (name === "" || photo === "" || question === true) {
            alert("You are missing a required query")
            return
        } 
            //creating our friend object
            var friend = {
                name,
                photo,
                scores
            }

            //creating our post call where we are getting back our new best friend as a response
        $.post("/api/friends", friend, function (data) {
            console.log(data)
            var modal = $(".modal-body")
            var name = $("<h1>")
            name.text(data.name)

            var moreImages = $("<img src= still image'>")
            moreImages.attr("src", data.photo)

            modal.append(name, moreImages)
            $("#exampleModal").modal("show")
          
        })

        reset()
    })
    //resetting all of our values on our form on call
    function reset() {
        $("#name").val("")
        $("#imageLink").val("")
        $("#q1 option:eq(0)").prop('selected', true)
        $("#q2 option:eq(0)").prop('selected', true)
        $("#q3 option:eq(0)").prop('selected', true)
        $("#q4 option:eq(0)").prop('selected', true)
        $("#q5 option:eq(0)").prop('selected', true)
        $("#q6 option:eq(0)").prop('selected', true)
        $("#q7 option:eq(0)").prop('selected', true)
        $("#q8 option:eq(0)").prop('selected', true)
        $("#q9 option:eq(0)").prop('selected', true)
        $("#q10 option:eq(0)").prop('selected', true)
        $(".modal-body").empty()

    }
    //looping through all the question elements to see if they have been answered.
    function questionCondition() {
        for (let i = 1; i < 11; i++) {
            if ($("#q" + i).val() === null)
                return true
        }

        return false
    }
</script>

</html>